include (CTest)
set(CTEST_PROJECT_NAME "yacas")

set (YACAS_TESTS
    arithmetic.yts
    association.yts
    binaryfactors.yts
    c_tex_form.yts
    calculus.yts
    calendar.yts
    canprove.yts
    comments.yts
    complex.yts
    cyclotomic.yts
    deriv.yts
    dimensions.yts
    dot.yts
    GaussianIntegers.yts
    graphs.yts
    integrate.yts
    io.yts
    journal.yts
    linalg.yts
    lists.yts
    logic_simplify_test.yts
    macro.yts
    matrixpower.yts
    multivar.yts
    newly.yts
    nthroot.yts
    numbers.yts
    numerics.yts
    nummethods.yts
    ode.yts
    openmath.yts
    orthopoly.yts
    outer.yts
    padic.yts
    plots.yts
    poly.yts
    predicates.yts
    programming.yts
    radsimp.yts
    regress.yts
    scopestack.yts
    simplify.yts
    solve.yts
    sturm.yts
    sums.yts
    tensors.yts
    tr.yts
    trace.yts
    transforms.yts)

foreach (_test ${YACAS_TESTS})
    if (WIN32)
        add_test(NAME cyacas-${_test} WORKING_DIRECTORY C:\\projects\\yacas COMMAND C:\\projects\\yacas\\tests\\test-yacas "C:\\projects\\yacas\\Release\\yacas.exe -pc --rootdir C:\\projects\\yacas\\scripts" C:\\projects\\yacas\\tests ${_test})
    else ()
        add_test(NAME cyacas-${_test} WORKING_DIRECTORY ${PROJECT_SOURCE_DIR} COMMAND ${PROJECT_SOURCE_DIR}/tests/test-yacas "$<TARGET_FILE:yacas> -pc --rootdir ${PROJECT_SOURCE_DIR}/scripts" ${PROJECT_SOURCE_DIR}/tests ${_test})
    endif ()
endforeach()

if (ENABLE_JYACAS)
    foreach (_test ${YACAS_TESTS})
        add_test(NAME jyacas-${_test} WORKING_DIRECTORY ${PROJECT_SOURCE_DIR} COMMAND ${PROJECT_SOURCE_DIR}/tests/test-yacas "${Java_JAVA_EXECUTABLE} -jar ${JYACAS_JAR_FILE}" ${PROJECT_SOURCE_DIR}/tests ${_test})
    endforeach()
endif ()
